# Клиент-серверное приложение для анализа текстовых файлов

## Описание

Сетевое приложение на C# (NET 10.0) для передачи и анализа текстовых файлов в клиент-серверной архитектуре. Сервер принимает файлы от нескольких клиентов одновременно, анализирует их содержимое и возвращает результаты анализа.

## Функциональность

### Серверная часть
- Прием файлов от нескольких клиентов одновременно
- Сохранение файлов с уникальными именами
- Анализ содержимого (подсчет строк, слов, символов)
- Сохранение результатов в текстовый файл и JSON
- Отправка результатов клиенту

### Клиентская часть
- Отправка файлов на сервер
- Отображение прогресса отправки
- Получение и отображение результатов анализа
- Интерактивный и пакетный режимы работы
- Автоматическое тестирование

## Требования

- .NET 8.0 SDK
- ОС: Windows, Linux или macOS

## Запуск

### Запуск сервера
```bash
cd FileAnalysisServer
dotnet run [порт]
```
По умолчанию используется порт 8888.

### Запуск клиента
```bash
cd FileAnalysisClient
dotnet run [файл1 файл2 ...]
```

## Пример использования

### Терминал 1 (Сервер):
```bash
$ dotnet run
=== СЕРВЕР АНАЛИЗА ФАЙЛОВ ===

[СЕРВЕР] Запущен на порту 8888
[СЕРВЕР] Директория для файлов: /home/user/ReceivedFiles
[СЕРВЕР] Директория для результатов: /home/user/AnalysisResults
[СЕРВЕР] Ожидание подключений...

[КЛИЕНТ] Подключен: 127.0.0.1:54321
[КЛИЕНТ] Получение файла: document.txt
[ПРОГРЕСС] Получено 25% файла
[ПРОГРЕСС] Получено 50% файла
[ПРОГРЕСС] Получено 75% файла
[СЕРВЕР] Файл сохранен: /home/user/ReceivedFiles/document_20240315_143022.txt
[АНАЛИЗ] document_20240315_143022.txt: 15 строк, 124 слов, 890 символов
[СЕРВЕР] Результат сохранен: document_20240315_143022.txt
[СЕРВЕР] Результат отправлен клиенту
[КЛИЕНТ] Обработка завершена: document_20240315_143022.txt
```

### Терминал 2 (Клиент):
```bash
$ dotnet run document.txt
=== КЛИЕНТ АНАЛИЗА ФАЙЛОВ ===

[КЛИЕНТ] Отправка файла: document.txt
[КЛИЕНТ] Подключен к серверу 127.0.0.1:8888
[ПРОГРЕСС] Отправлено 25%
[ПРОГРЕСС] Отправлено 50%
[ПРОГРЕСС] Отправлено 75%
[КЛИЕНТ] Файл отправлен полностью

=== РЕЗУЛЬТАТ АНАЛИЗА ===
Имя файла: document_20240315_143022.txt
Строк: 15
Слов: 124
Символов: 890
Время анализа: 15.03.2024 14:30:22
========================
```

## Тестирование

Для запуска автоматических тестов в клиенте введите команду `test` в интерактивном режиме:

```bash
> test

=== ЗАПУСК ТЕСТОВ ===

Создан тестовый файл: test1.txt
[КЛИЕНТ] Отправка файла: test1.txt
...
```

## Обработка ошибок

Приложение обрабатывает следующие ошибки:
- Отсутствие файла
- Потеря соединения
- Некорректные данные
- Отсутствие прав доступа
- Переполнение диска

## Протокол взаимодействия

1. Клиент подключается к серверу
2. Отправляет имя файла (UTF-8)
3. Отправляет размер файла (8 байт, Int64)
4. Отправляет содержимое файла
5. Сервер анализирует файл
6. Сервер отправляет результат (JSON с префиксом длины)
7. Соединение закрывается